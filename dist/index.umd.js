/*! For license information please see index.umd.js.LICENSE.txt */
!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.neoRegister=o():e.neoRegister=o()}(this,function(){return function(){"use strict";var e={n:function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(r,{a:r}),r},d:function(o,r){for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{autoConvertVueComponent:function(){return b},createVue2Component:function(){return d},registerNeoCmp:function(){return j},registerNeoEditorModel:function(){return h}});var r=require("@babel/runtime/helpers/extends"),t=e.n(r),n=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),i=e.n(n),s=require("@babel/runtime/helpers/inheritsLoose"),u=e.n(s),c=require("react"),a=e.n(c),p=require("vue"),f=e.n(p),m=["data"];function d(e){if(e&&("function"==typeof e||"object"==typeof e))return function(o){function r(e,r){var t;return(t=o.call(this,e)||this).domRef=void 0,t.vm=void 0,t.isUnmount=void 0,t.domRef=a().createRef(),t.isUnmount=!1,t.resolveNeoProps=t.resolveNeoProps.bind(t),t}u()(r,o);var n=r.prototype;return n.componentDidMount=function(){var o=this,r=this.resolveNeoProps(),n=r.neoData,s=r.neoMSTData,u=r.neoFunc,c=e="function"==typeof e?new e:e,a=c.data,p=i()(c,m),d=l("function"==typeof a?a():a,n);this.vm=new(f())(t()({},p,{data:function(){return d},props:l(u,t()({},p.props||{},s))})),Object.keys(u).forEach(function(e){o.vm.$props[e]=u[e]}),this.domRef.current&&this.domRef.current.appendChild(this.vm.$mount().$el)},n.componentDidUpdate=function(){var e=this;if(!this.isUnmount){var o=this.resolveNeoProps().neoData;this.vm&&(Object.keys(o).forEach(function(r){e.vm[r]=o[r]}),this.vm.$forceUpdate())}},n.componentWillUnmount=function(){this.isUnmount=!0,this.vm&&this.vm.$destroy()},n.resolveNeoProps=function(){var e=this,o={},r={},t={};return Object.keys(this.props).forEach(function(n){var i,s=e.props[n];"function"==typeof s?o[n]=s:(i=s)&&(i.$treenode||i.$mstObservable||i.$modelType||i.$modelId||"[object Proxy]"===Object.prototype.toString.call(i))?t[n]=s:r[n]=s}),{neoData:r,neoMSTData:t,neoFunc:o}},n.reload=function(){this.vm&&this.vm.reload?this.vm.reload():console.warn("自定义组件暂不支持reload动作。")},n.doAction=function(e,o){this.vm&&this.vm.doAction?this.vm.doAction(e,o):console.warn("自定义组件中不存在 doAction。")},n.render=function(){return a().createElement("div",{ref:this.domRef})},r}(a().Component)}function l(e,o,r){void 0===r&&(r=!0);var t=function(e,o){void 0===o&&(o=!0);var r=e&&e.__super?Object.create(e.__super,{__super:{value:e.__super,writable:!1,enumerable:!1}}):Object.create(Object.prototype);return o&&e&&Object.keys(e).forEach(function(o){return r[o]=e[o]}),r}(e,r);return o&&Object.keys(o).forEach(function(e){return t[e]=o[e]}),t}var v,w,g="[neo-register]";function y(e){return"object"==typeof e&&(e._compiled&&e.components||e.__file&&e.__file.endsWith(".vue"))}function b(e){return y(e)?d(e):e}function h(e,o){if(e&&function(e){var o=!1;if(!e)return!1;var r=new e;return r.label?r.tags?Array.isArray(r.tags)?(r.icon||Object.assign(e.prototype,{icon:"https://neo-widgets.bj.bcebos.com/custom-widget.svg"}),o=!0):console.error(g+" / registerNeoEditorModel: 自定义组件注册失败，组件分类（tags）格式异常。"):console.error(g+" / registerNeoEditorModel: 自定义组件注册失败，组件分类（tags）不能为空。"):console.error(g+" / registerNeoEditorModel: 自定义组件注册失败，名称（label）不能为空。"),o}(e)){var r,t,n,i=o||(new e).cmpType;i||console.error(g+" / registerNeoEditorModel: 自定义组件注册失败，cmpType 不能为空。");var s=new e;if(Object.assign(e.prototype,{custom:!0,exposedToDesigner:null==(r=s.exposedToDesigner)||r,namespace:null!=(t=s.namespace)?t:"neo-cmp-cli",enableDuplicate:null==(n=s.enableDuplicate)||n,cmpType:i}),window&&window.postMessage){var u=function(e,o){return window&&!window.NEOEditorCustomModels&&(window.NEOEditorCustomModels={}),window.NEOEditorCustomModels[e]?(console.error(g+"注册自定义组件模型失败，已存在重名插件("+e+")。"),null):(window.NEOEditorCustomModels[e]=o,e)}(i,e);u&&(console.info(g+"触发注册自定义组件模型("+i+")事件"),window.postMessage({type:"neo-model-register-event",eventMsg:g+"注册一个 neo-editor 自定义组件模型",cmpType:i},"*"))}}}function j(e,o){if(e){var r,t={cmpType:"",usage:v.renderer,weight:0};if(o&&(r=o,"String"===Object.prototype.toString.call(r).slice(8,-1))?Object.assign(t,{cmpType:o}):Object.assign(t,o),t&&!t.cmpType)console.error(g+" / registerNeoCmp: 自定义组件注册失败，cmpType 不能为空。");else{t.framework=t.framework?function(e){var o=w.react;if(!e)return o;var r=e.toLowerCase().trim();switch(r){case"jquery":case"jq":r=w.jquery;break;case"vue2":case"vue 2":case"vue2.0":case"vue 2.0":r=w.vue2;break;case"vue":case"vue3":case"vue 3":case"vue3.0":case"vue 3.0":r=w.vue3,console.error(g+" 暂不支持 vue3.0 技术栈。");break;default:r=w.react}return r}(t.framework):y(e)?"vue2":"react",t.usage=function(e){var o=v.renderer;if(!e)return o;var r=e.toLowerCase().trim();switch(r){case"renderer":case"renderers":default:r=v.renderer;break;case"formitem":case"form-item":case"form item":r=v.formitem}return r}(t.usage);var n={react:function(e){return e},vue2:d,vue3:d}[t.framework](e);if({renderer:function(){},formitem:function(){}}[t.usage]){if(window&&window.postMessage){var i=(s=t.cmpType,u={cmpType:t.cmpType,weight:t.weight,usage:t.usage,framework:t.framework,component:n,config:t},window&&!window.NeoCustomCmps&&(window.NeoCustomCmps={}),window.NeoCustomCmps[s]?(console.error(g+" / registerNeoCmp: 自定义组件注册失败，已存在重名渲染器("+s+")。"),null):(window.NeoCustomCmps[s]=u,s));i&&(console.info(g+"触发注册自定义组件("+i+")事件"),window.postMessage({type:"neo-cmp-register-event",eventMsg:g+"注册一个自定义组件",neoRenderer:{cmpType:i,weight:t.weight,usage:t.usage,config:t}},"*"))}}else console.error(g+" / registerNeoCmp: 自定义组件注册失败，暂不支持 "+t.usage+" 组件类型。")}}var s,u}return function(e){e.renderer="renderer",e.formitem="formitem"}(v||(v={})),function(e){e.react="react",e.vue2="vue2",e.vue3="vue3",e.jquery="jquery"}(w||(w={})),o}()});