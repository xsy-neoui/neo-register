/*! For license information please see index.umd.js.LICENSE.txt */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.neoWidget=r():e.neoWidget=r()}(this,function(){return function(){"use strict";var e={n:function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(o,{a:o}),o},d:function(r,o){for(var t in o)e.o(o,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:o[t]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{createVue2Component:function(){return w},registerNeoEditorPlugin:function(){return c},registerRendererByType:function(){return b}});var o=require("@babel/runtime/helpers/extends"),t=e.n(o);function n(e,r,o){void 0===o&&(o=!0);var t=function(e,r){void 0===r&&(r=!0);var o=e&&e.__super?Object.create(e.__super,{__super:{value:e.__super,writable:!1,enumerable:!1}}):Object.create(Object.prototype);return r&&e&&Object.keys(e).forEach(function(r){return o[r]=e[r]}),o}(e,o);return r&&Object.keys(r).forEach(function(e){return t[e]=r[e]}),t}var i,s,u="[neo-widget]";function c(e,r){if(e&&function(e){var r=!1;if(!e)return!1;var o=new e;return o.cmpType?o.label?o.tags?Array.isArray(o.tags)?(o.icon||Object.assign(e.prototype,{icon:"https://neo-widgets.bj.bcebos.com/custom-widget.svg"}),r=!0):console.error(u+" / registerNeoEditorPlugin: 自定义组件注册失败，组件分类（tags）格式异常。"):console.error(u+" / registerNeoEditorPlugin: 自定义组件注册失败，组件分类（tags）不能为空。"):console.error(u+" / registerNeoEditorPlugin: 自定义组件注册失败，名称（label）不能为空。"):console.error(u+" / registerNeoEditorPlugin: 自定义组件注册失败，cmpType 不能为空。"),r}(e)){var o,t,n=r||(new e).cmpType,i=new e;if(Object.assign(e.prototype,{custom:!0,exposedToDesigner:null==(o=i.exposedToDesigner)||o,namespace:null!=(t=i.namespace)?t:"neo-widget-cli",cmpType:n}),window&&window.postMessage){var s=function(e,r){return window&&!window.NEOEditorCustomPlugins&&(window.NEOEditorCustomPlugins={}),window.NEOEditorCustomPlugins[e]?(console.error(u+"注册自定义插件失败，已存在重名插件("+e+")。"),null):(window.NEOEditorCustomPlugins[e]=r,e)}(n,e);s&&(console.info(u+"触发注册自定义插件("+n+")事件"),window.postMessage({type:"neo-plugin-register-event",eventMsg:u+"注册一个 neo-editor 自定义插件",cmpType:n},"*"))}}}!function(e){e.renderer="renderer",e.formitem="formitem"}(i||(i={})),function(e){e.react="react",e.vue2="vue2",e.vue3="vue3",e.jquery="jquery"}(s||(s={}));var a=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),d=e.n(a),f=require("@babel/runtime/helpers/inheritsLoose"),p=e.n(f),m=require("react"),l=e.n(m),v=require("vue"),g=e.n(v),y=["data"];function w(e){if(e&&("function"==typeof e||"object"==typeof e))return function(r){function o(e,o){var t;return(t=r.call(this,e)||this).domRef=void 0,t.vm=void 0,t.isUnmount=void 0,t.domRef=l().createRef(),t.isUnmount=!1,t.resolveNeoProps=t.resolveNeoProps.bind(t),t}p()(o,r);var i=o.prototype;return i.componentDidMount=function(){var r=this,o=this.resolveNeoProps(),i=o.neoData,s=o.neoMSTData,u=o.neoFunc,c=e="function"==typeof e?new e:e,a=c.data,f=d()(c,y),p=n("function"==typeof a?a():a,i);this.vm=new(g())(t()({},f,{data:function(){return p},props:n(u,t()({},f.props||{},s))})),Object.keys(u).forEach(function(e){r.vm.$props[e]=u[e]}),this.domRef.current&&this.domRef.current.appendChild(this.vm.$mount().$el)},i.componentDidUpdate=function(){var e=this;if(!this.isUnmount){var r=this.resolveNeoProps().neoData;this.vm&&(Object.keys(r).forEach(function(o){e.vm[o]=r[o]}),this.vm.$forceUpdate())}},i.componentWillUnmount=function(){this.isUnmount=!0,this.vm&&this.vm.$destroy()},i.resolveNeoProps=function(){var e=this,r={},o={},t={};return Object.keys(this.props).forEach(function(n){var i,s=e.props[n];"function"==typeof s?r[n]=s:(i=s)&&(i.$treenode||i.$mstObservable||i.$modelType||i.$modelId||"[object Proxy]"===Object.prototype.toString.call(i))?t[n]=s:o[n]=s}),{neoData:o,neoMSTData:t,neoFunc:r}},i.reload=function(){this.vm&&this.vm.reload?this.vm.reload():console.warn("自定义组件暂不支持reload动作。")},i.doAction=function(e,r){this.vm&&this.vm.doAction?this.vm.doAction(e,r):console.warn("自定义组件中不存在 doAction。")},i.render=function(){return l().createElement("div",{ref:this.domRef})},o}(l().Component)}function b(e,r){if(e){var o,t={cmpType:"",usage:i.renderer,weight:0};if(r&&(o=r,"String"===Object.prototype.toString.call(o).slice(8,-1))?Object.assign(t,{cmpType:r}):Object.assign(t,r),t&&!t.cmpType)console.error(u+" / registerRendererByType: 自定义组件注册失败，cmpType 不能为空。");else{t.framework=t.framework?function(e){var r=s.react;if(!e)return r;var o=e.toLowerCase().trim();switch(o){case"jquery":case"jq":o=s.jquery;break;case"vue2":case"vue 2":case"vue2.0":case"vue 2.0":o=s.vue2;break;case"vue":case"vue3":case"vue 3":case"vue3.0":case"vue 3.0":o=s.vue3,console.error("neo-widget 暂不支持 vue3.0 技术栈。");break;default:o=s.react}return o}(t.framework):"object"==typeof(f=e)&&(f._compiled&&f.components||f.__file&&f.__file.endsWith(".vue"))?"vue2":"react",t.usage=function(e){var r=i.renderer;if(!e)return r;var o=e.toLowerCase().trim();switch(o){case"renderer":case"renderers":default:o=i.renderer;break;case"formitem":case"form-item":case"form item":o=i.formitem}return o}(t.usage);var n={react:function(e){return e},vue2:w,vue3:w}[t.framework](e);if({renderer:function(){},formitem:function(){}}[t.usage]){if(window&&window.postMessage){var c=(a=t.cmpType,d={cmpType:t.cmpType,weight:t.weight,usage:t.usage,framework:t.framework,component:n,config:t},window&&!window.NeoCustomRenderers&&(window.NeoCustomRenderers={}),window.NeoCustomRenderers[a]?(console.error(u+" / registerRendererByType: 自定义组件注册失败，已存在重名渲染器("+a+")。"),null):(window.NeoCustomRenderers[a]=d,a));c&&(console.info(u+"触发注册自定义组件("+c+")事件"),window.postMessage({type:"neo-renderer-register-event",eventMsg:u+"注册一个自定义组件",neoRenderer:{cmpType:c,weight:t.weight,usage:t.usage,config:t}},"*"))}}else console.error(u+" / registerRendererByType: 自定义组件注册失败，暂不支持 "+t.usage+" 组件类型。")}}var a,d,f}return r}()});